## 머신러닝 파이프라인의 이해

1. 개요
* 개념 : 데이터 수집부터 전처리, 학습 모델 배포, 예측까지 전 과정을 순차적으로 처리하도록 설계된 머신러닝 아키텍처
* 필요성
	* 머신러닝 자동화 : 시간 소모 줄임
	* 예측 정확도 향상 : 내부 구조 이해를 통한 성능 향상

2. Dream and Reality
* 실제로는 수집, 데이터 클렌징, 디버깅, 리소스 배분, 실험 및 결과 리뷰, 모델 Deploy, 운영에서 문제들이 없는 지, 다양한 상황 모니터링 하는 등의 현실 !

3. ML Project 에서 System의 요소
* 모델 개발은 ML project 안에서 굉장히 작은 비율.
* Software Engineering을 포함한 다른 영역의 비율이 훨씬 높음.


4. 머신러닝 모델 개발에서 마주하는 난관
* 파이프라인이 구축되어 있지 않고 주먹구구식으로 개발하게 되면 ?
	* **’데이터’** 기반이기에 모니터링 결과를 바탕으로 주기적인 업데이트가 필요함.
	* 많은 기업이 이 단계를 원활하게 수행하는 '파이프라인'을 마련하지 못해 모델 개발에서 배포까지 진척이 늦어짐.
* 불필요한 리소스 활용 증가
	* **데이터 가변성**으로 특정 모델 배포 후에 새로운 데이터 기반의 **지속적인 모니터링, 학습, 업데이트 필요.**
	* 체계화된 파이프라인이 없는 상태에서 진행하면 운영팀으로부터 머신러닝팀에 새로운 데이터를 전달하는데 **많은 리소스와 시간이 소요됨.**
* 개발 조직과 운영 조직간의 **업무 공유와 협업**이 어려워짐 (데이터 사일로 data silo)

5. MLops란?
* Machine Learning + Operations
* 모델 개발과 운영 시스템을 통합하여 더 유연하고 효율적으로 개발을 가능케하는 도구이자 개발환경
* 목표 : ML Research 팀이 개발한 최상의 모델을 배포 환경에서 동일하게 구현
* 특징 : 지속적 통합(**CI**, Continuous Intergration), 지속적 배포(**CD**, Continuous Delivery)를 이행, 또한 추가적으로 데이터가 바뀔 떄마다 모델을 반복 학습(**CT**, Continuous Training)

6. ML Project의 Life Cycle



7. Planning & Project Setup
* 프로젝트 우선순위를 정하기 위한 키 포인트
	* High Impact : cheap prediction으로 큰 효과를 내는 가치 있는 프로젝트
	* High Feasibility : 데이터 가용성, 정확도 요구사항, 문제 난이도 등
	
	1) define project goals
	
	* Data Avaliability
	  * 레이블 O : 모델 훈련과 품질 평가가 수월함.
	  * 유사 레이블 O : 완벽한 레이블된 데이터보다는 찾기가 수월함.
	  * 레이블 X : 레이블링 하거나, 레이블 없이 학습하는 모델을 찾아야 함.
	* Accuracy requirement
	  - Cost는 데이터 가용성에 의해서도 결정되지만, 정확성 요구도 큰 역할을 함.
	  - 높은 성능까지 가려면 Cost가 지수함수처럼 증가함.
	* 초기 모델 설계의 3가지 방법
	  * (1) baseline model(기준모델) : 도메인 지식을 이용해 머신러닝을 사용하지 않고 rule base로 해결할 수 있는 방법을 설계해본다. 
	  * (2) simple model( 단순모델) : 문제를 여러 단계로 나누어 단계별로 머신러닝 모델 및 규칙기반 모델을 적용해본다.
	  * (3) complex model(복잡 모델) : end-to-end 방식으로 모델링한다.
	* 대부분의 경우 머신러닝 없이 시작하는 것이 머신러닝 제품을 만드는 가장 빠른 방법이다.
	
	2) Choose Mectrics
	
	- metric 을 다양하게 조합하여 사용해야 한다.
	
	3) Evaluate baselines
	
	- 하한선이 엄격할수록 유용하다.
	- 일반인보다 전문가로부터 모은 데이터가 baseline의 질을 높여주지만, 상대적으로 데이터 수집의 난이도가 높아진다.

8. Data Collection & Labeling

   1) 데이터 수집과 레이블링 옵션

   - 자체 어노테이터 채용 : 빠르고 질좋은 어노테이션 가능, 비용이 많이 들고 확장이 어려움.

   2) 크라우드 소싱

   - Amazon Mechanical Tuck같은 것, 빠르고 싸지만 어노테이션의 질을 보장하지 못함.

   3) 데이터 구축 서비스 회사

   - 비용과 시간을 절감할 수 있음. 직접 수행후 ,여러업체에 샘플을 요청
   - 크라우드 웍스, Annotation-AI, 테스트 웍스,AIMMO

   4) data labeling tools

   5) Data versioning : 데이터의 버전이 관리되지 않으면 머신러닝 모델이 완벽하게 관리된다고 할 수 없음!

9.  Training & Debugging

   1) 딥러닝 문제 해결의 어려움

   - 모델 성능을 떨어뜨리는 요인들 : 구현을 잘못한 경우, hyperparameter의 choice

   2) 일반적으로 dataset 구성 시 생기는 이슈들

   - Not enough data
   - Noisy labels
   - Imbalanced classes
   - Train / Test from different distributions

   3) 왜 어려운가?

   - 버그가 있는지 알수조차 없고 알기 어려움
   - 같은 성능 저하에 대해서 가능한 원인이 많음
   - 하이퍼파라미터와 데이터 구성의 작은 변화에도 학습결과가 예민하게 변화함.

   4) 마인드셋 : Pessimism 최대한 비관적으로 보자. 

   - 문제의 원인을 알기 어렵기 때문에 먼저 간단하게 시작하고 (start simple) 점차 복잡도를 올리자.

   5) 문제 해결의 전략

   - 기본셋팅 사용
   - 문제를 단순화하기

